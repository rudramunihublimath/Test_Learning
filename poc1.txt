        String protectBranchUrl = GITLAB_URL + "/v4/projects/" + encodedProject + "/protected_branches";

        String protectPayload = String.format(
                "{ \"name\": \"%s\", " +
                "  \"push_access_level\": 40, " +   // only Maintainers can push
                "  \"merge_access_level\": 40, " +  // only Maintainers can merge
                "  \"allow_force_push\": false, " +
                "  \"unprotect_access_level\": 40 }", NEW_BRANCH);

        HttpEntity<String> protectRequest = new HttpEntity<>(protectPayload, headers);

        ResponseEntity<String> protectResponse = restTemplate.exchange(
                protectBranchUrl, HttpMethod.POST, protectRequest, String.class);

        if (protectResponse.getStatusCode() == HttpStatus.CREATED) {
            System.out.println("✅ Branch protected with rules: " + NEW_BRANCH);
        } else if (protectResponse.getStatusCode() == HttpStatus.BAD_REQUEST) {
            System.out.println("⚠️ Branch may already be protected: " + NEW_BRANCH);
        } else {
            System.out.println("❌ Failed to protect branch: " + protectResponse);
        }
